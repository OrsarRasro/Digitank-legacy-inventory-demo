@model IEnumerable<InventoryManagement.Models.Product>

@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Inventory Dashboard</h2>

<div class="stats">
    <div class="stat-box">
        <div class="stat-number">@ViewBag.TotalProducts</div>
        <div>Total Products</div>
    </div>
    <div class="stat-box">
        <div class="stat-number">@ViewBag.TotalValue</div>
        <div>Total Inventory Value</div>
    </div>
    <div class="stat-box">
        <div class="stat-number">@ViewBag.LowStockProducts</div>
        <div>Low Stock Items</div>
    </div>
    <div class="stat-box">
        <div class="stat-number">@ViewBag.LastUpdated</div>
        <div>Last Updated</div>
    </div>
</div>

<div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <h4>⚠️ Legacy System Notice</h4>
    <p><strong>Performance Issues:</strong> This page loads slowly due to synchronous database operations and lack of caching.</p>
    <p><strong>Scalability Limits:</strong> Single server deployment cannot handle high traffic loads.</p>
    <p><strong>Mobile Limitations:</strong> No API endpoints available for mobile app integration.</p>
</div>

<h3>Recent Products</h3>

@if (Model != null && Model.Any())
{
    <table>
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Category</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var product in Model.Take(10))
            {
                <tr>
                    <td>@product.ProductName</td>
                    <td>@product.Category</td>
                    <td>@product.Price.ToString("C")</td>
                    <td>@product.StockQuantity</td>
                    <td>
                        @if (product.IsLowStock())
                        {
                            <span style="color: #e74c3c; font-weight: bold;">Low Stock</span>
                        }
                        else
                        {
                            <span style="color: #27ae60;">In Stock</span>
                        }
                    </td>
                    <td>
                        @Html.ActionLink("View", "Details", "Product", new { id = product.ProductId }, new { @class = "btn" })
                        @Html.ActionLink("Edit", "Edit", "Product", new { id = product.ProductId }, new { @class = "btn" })
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No products found. @Html.ActionLink("Add your first product", "Create", "Product", null, new { @class = "btn" })</p>
}

<div style="margin-top: 30px;">
    @Html.ActionLink("View All Products", "Index", "Product", null, new { @class = "btn" })
    @Html.ActionLink("Add New Product", "Create", "Product", null, new { @class = "btn" })
</div>

<div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 30px;">
    <h4>System Performance Metrics</h4>
    <p><strong>Page Load Time:</strong> ~3-4 seconds (slow due to synchronous operations)</p>
    <p><strong>Database Queries:</strong> Multiple synchronous queries per page load</p>
    <p><strong>Caching:</strong> None implemented (every request hits database)</p>
    <p><strong>Scalability:</strong> Single server, no load balancing</p>
</div>