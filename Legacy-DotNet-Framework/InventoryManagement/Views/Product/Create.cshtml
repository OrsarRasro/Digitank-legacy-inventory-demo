@model InventoryManagement.Models.Product

@{
    ViewBag.Title = "Add New Product";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Add New Product</h2>

<div style="background-color: #e8f4fd; border: 1px solid #bee5eb; padding: 15px; border-radius: 5px; margin: 20px 0;">
    <h4>üìù Product Information</h4>
    <p>Fill out the form below to add a new product to your inventory. All fields marked with * are required.</p>
</div>

@using (Html.BeginForm("Create", "Product", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    
    <div class="form-group">
        @Html.LabelFor(m => m.ProductName)
        <span style="color: red;">*</span>
        @Html.TextBoxFor(m => m.ProductName, new { @class = "form-control", placeholder = "Enter product name" })
        @Html.ValidationMessageFor(m => m.ProductName, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Description)
        @Html.TextAreaFor(m => m.Description, new { @class = "form-control", rows = 3, placeholder = "Enter product description (optional)" })
        @Html.ValidationMessageFor(m => m.Description, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Category)
        <span style="color: red;">*</span>
        @Html.DropDownListFor(m => m.Category, ViewBag.Categories as SelectList, "-- Select Category --", new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Category, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Supplier)
        @Html.DropDownListFor(m => m.Supplier, ViewBag.Suppliers as SelectList, "-- Select Supplier --", new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.Supplier, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Price)
        <span style="color: red;">*</span>
        @Html.TextBoxFor(m => m.Price, new { @class = "form-control", type = "number", step = "0.01", min = "0", placeholder = "0.00" })
        @Html.ValidationMessageFor(m => m.Price, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.StockQuantity, "Stock Quantity")
        <span style="color: red;">*</span>
        @Html.TextBoxFor(m => m.StockQuantity, new { @class = "form-control", type = "number", min = "0", placeholder = "0" })
        @Html.ValidationMessageFor(m => m.StockQuantity, "", new { @class = "text-danger" })
    </div>

    <div style="margin: 30px 0;">
        <button type="submit" class="btn" style="background-color: #27ae60;">
            üíæ Add Product
        </button>
        @Html.ActionLink("Cancel", "Index", null, new { @class = "btn", style = "background-color: #95a5a6;" })
    </div>
}

<div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin-top: 30px;">
    <h4>‚ö†Ô∏è Legacy Form Limitations</h4>
    <ul>
        <li><strong>Synchronous Submission:</strong> Page will reload completely when you submit (no AJAX)</li>
        <li><strong>Basic Validation:</strong> Only server-side validation, no real-time feedback</li>
        <li><strong>No Auto-save:</strong> Data lost if you navigate away without saving</li>
        <li><strong>Limited UI:</strong> Basic HTML forms, no modern UI components</li>
    </ul>
</div>

<div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 20px;">
    <h4>üí° Business Rules</h4>
    <ul>
        <li>Product names must be unique</li>
        <li>Price must be greater than $0.00</li>
        <li>Stock quantity cannot be negative</li>
        <li>Low stock alert triggers when quantity < 10</li>
        <li>Electronics category gets 10% discount automatically</li>
        <li>Books category gets 5% discount automatically</li>
    </ul>
</div>

@section Scripts {
    <script>
        // Legacy JavaScript - basic form validation
        document.querySelector('form').addEventListener('submit', function(e) {
            var productName = document.querySelector('input[name="ProductName"]').value;
            var price = document.querySelector('input[name="Price"]').value;
            var stock = document.querySelector('input[name="StockQuantity"]').value;
            
            if (!productName || !price || !stock) {
                alert('Please fill in all required fields marked with *');
                e.preventDefault();
                return false;
            }
            
            if (parseFloat(price) <= 0) {
                alert('Price must be greater than $0.00');
                e.preventDefault();
                return false;
            }
            
            if (parseInt(stock) < 0) {
                alert('Stock quantity cannot be negative');
                e.preventDefault();
                return false;
            }
            
            // Show loading message (legacy way)
            var submitBtn = document.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '‚è≥ Adding Product...';
            submitBtn.disabled = true;
        });
    </script>
}